# API Contract: Shared Specs

**Feature**: 021-spec-consolidation
**Date**: 2025-12-08

## AnimationSpec API

```dart
/// Shared specification for animation timing.
@TailorMixin()
class AnimationSpec extends ThemeExtension<AnimationSpec> {
  // --- Properties ---
  final Duration duration;
  final Curve curve;

  // --- Constructor ---
  const AnimationSpec({
    required this.duration,
    required this.curve,
  });

  // --- Static Presets ---
  static const AnimationSpec instant;  // 0ms, linear
  static const AnimationSpec fast;     // 150ms, easeOut
  static const AnimationSpec standard; // 300ms, easeInOut
  static const AnimationSpec slow;     // 500ms, easeOutExpo

  // --- Override ---
  AnimationSpec withOverride({
    Duration? duration,
    Curve? curve,
  });

  // --- Generated by @TailorMixin ---
  @override
  AnimationSpec copyWith({Duration? duration, Curve? curve});

  @override
  AnimationSpec lerp(AnimationSpec? other, double t);
}
```

### Usage Examples

```dart
// Access from theme
final animation = theme.carouselStyle.animation;

// Use preset
final fastAnimation = AnimationSpec.fast;

// Create custom
final custom = AnimationSpec(
  duration: Duration(milliseconds: 200),
  curve: Curves.bounceOut,
);

// Override single property
final customDuration = AnimationSpec.standard.withOverride(
  duration: Duration(milliseconds: 400),
);
```

---

## StateColorSpec API

```dart
/// Shared specification for state-based colors.
@TailorMixin()
class StateColorSpec extends ThemeExtension<StateColorSpec> {
  // --- Properties ---
  final Color active;
  final Color inactive;
  final Color? disabled;
  final Color? error;

  // --- Constructor ---
  const StateColorSpec({
    required this.active,
    required this.inactive,
    this.disabled,
    this.error,
  });

  // --- State Resolution ---
  /// Returns appropriate color based on current state.
  /// Priority: error > disabled > active/inactive
  Color resolve({
    required bool isActive,
    bool isDisabled = false,
    bool hasError = false,
  });

  // --- Override ---
  StateColorSpec withOverride({
    Color? active,
    Color? inactive,
    Color? disabled,
    Color? error,
  });

  // --- Generated by @TailorMixin ---
  @override
  StateColorSpec copyWith({...});

  @override
  StateColorSpec lerp(StateColorSpec? other, double t);
}
```

### Usage Examples

```dart
// Access from theme
final textColors = theme.tabsStyle.textColors;

// Resolve color based on state
final color = textColors.resolve(isActive: isSelected);

// With disabled state
final color = textColors.resolve(
  isActive: isSelected,
  isDisabled: !isEnabled,
);

// Create custom
final colors = StateColorSpec(
  active: Colors.blue,
  inactive: Colors.grey,
  disabled: Colors.grey.withOpacity(0.5),
);
```

---

## OverlaySpec API

```dart
/// Shared specification for modal overlays.
@TailorMixin()
class OverlaySpec extends ThemeExtension<OverlaySpec> {
  // --- Properties ---
  final Color scrimColor;
  final double blurStrength;
  final AnimationSpec animation;

  // --- Constructor ---
  const OverlaySpec({
    required this.scrimColor,
    this.blurStrength = 0.0,
    required this.animation,
  });

  // --- Static Presets ---
  static const OverlaySpec standard; // black54, no blur, 300ms
  static const OverlaySpec glass;    // black26, blur 10, 500ms
  static const OverlaySpec pixel;    // black87, no blur, instant

  // --- Override ---
  OverlaySpec withOverride({
    Color? scrimColor,
    double? blurStrength,
    AnimationSpec? animation,
  });

  // --- Generated by @TailorMixin ---
  @override
  OverlaySpec copyWith({...});

  @override
  OverlaySpec lerp(OverlaySpec? other, double t);
}
```

### Usage Examples

```dart
// Access from theme
final overlay = theme.sheetStyle.overlay;

// Use preset
final glassOverlay = OverlaySpec.glass;

// Override animation only
final customOverlay = OverlaySpec.standard.withOverride(
  animation: AnimationSpec.fast,
);

// Create fully custom
final custom = OverlaySpec(
  scrimColor: Colors.black.withOpacity(0.7),
  blurStrength: 5.0,
  animation: AnimationSpec(
    duration: Duration(milliseconds: 250),
    curve: Curves.easeInOutCubic,
  ),
);
```

---

## Barrel Export

```dart
// lib/src/foundation/theme/design_system/specs/shared/shared_specs.dart

export 'animation_spec.dart';
export 'state_color_spec.dart';
export 'overlay_spec.dart';
```
