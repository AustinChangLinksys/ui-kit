# API Contract: SheetStyle

**Feature**: 021-spec-consolidation
**Date**: 2025-12-08

## SheetDirection Enum

```dart
/// Discriminator for sheet positioning.
enum SheetDirection {
  /// Sheet slides from bottom of screen
  bottom,

  /// Sheet slides from side (left or right)
  side,
}
```

## SheetStyle API

```dart
/// Unified style for bottom sheets and side sheets.
/// Replaces deprecated BottomSheetStyle and SideSheetStyle.
@TailorMixin()
class SheetStyle extends ThemeExtension<SheetStyle> {
  // --- Properties ---

  /// Overlay appearance (scrim color, blur, animation timing)
  final OverlaySpec overlay;

  /// Border radius for sheet corners
  /// - Bottom sheets: top corners only
  /// - Side sheets: opposite side corners
  final double borderRadius;

  /// Sheet width for side sheets (null = full width for bottom sheets)
  final double? width;

  /// Height of the drag handle indicator (bottom sheets only)
  final double dragHandleHeight;

  /// Enable dithering texture pattern (Pixel theme)
  final bool enableDithering;

  // --- Constructor ---
  const SheetStyle({
    required this.overlay,
    required this.borderRadius,
    this.width,
    this.dragHandleHeight = 4.0,
    this.enableDithering = false,
  });

  // --- Override ---
  SheetStyle withOverride({
    OverlaySpec? overlay,
    double? borderRadius,
    double? width,
    double? dragHandleHeight,
    bool? enableDithering,
  });

  // --- Generated by @TailorMixin ---
  @override
  SheetStyle copyWith({...});

  @override
  SheetStyle lerp(SheetStyle? other, double t);
}
```

## Usage Examples

### Theme Definition

```dart
// In glass_design_theme.dart
SheetStyle(
  overlay: OverlaySpec.glass,
  borderRadius: 24.0,
  width: 320.0, // For side sheets
  dragHandleHeight: 4.0,
  enableDithering: false,
)

// In pixel_design_theme.dart
SheetStyle(
  overlay: OverlaySpec.pixel,
  borderRadius: 0.0, // Sharp corners
  width: 280.0,
  dragHandleHeight: 8.0, // Thick handle
  enableDithering: true,
)
```

### Component Usage

```dart
// AppBottomSheet
class AppBottomSheet extends StatelessWidget {
  final Widget child;
  final SheetStyle? styleOverride;

  @override
  Widget build(BuildContext context) {
    final theme = Theme.of(context).extension<AppDesignTheme>()!;
    final style = styleOverride ?? theme.sheetStyle;

    return AnimatedContainer(
      duration: style.overlay.animation.duration,
      curve: style.overlay.animation.curve,
      decoration: BoxDecoration(
        borderRadius: BorderRadius.vertical(
          top: Radius.circular(style.borderRadius),
        ),
      ),
      child: child,
    );
  }
}

// AppSideSheet
class AppSideSheet extends StatelessWidget {
  final Widget child;
  final SheetDirection side; // left or right

  @override
  Widget build(BuildContext context) {
    final theme = Theme.of(context).extension<AppDesignTheme>()!;
    final style = theme.sheetStyle;

    return SizedBox(
      width: style.width ?? 320.0,
      child: AnimatedContainer(
        duration: style.overlay.animation.duration,
        curve: style.overlay.animation.curve,
        child: child,
      ),
    );
  }
}
```

### With Local Override

```dart
// Override just the animation speed
AppBottomSheet(
  styleOverride: theme.sheetStyle.withOverride(
    overlay: theme.sheetStyle.overlay.withOverride(
      animation: AnimationSpec.fast,
    ),
  ),
  child: content,
)
```

## Migration from Deprecated Styles

### Before (Deprecated)

```dart
// Old usage
final bottomStyle = theme.bottomSheetStyle;
final sideStyle = theme.sideSheetStyle;

// Old animation access
final duration = theme.bottomSheetStyle.animationDuration;
final curve = theme.bottomSheetStyle.animationCurve;
```

### After (New)

```dart
// New usage - single style
final style = theme.sheetStyle;

// New animation access via composed spec
final duration = theme.sheetStyle.overlay.animation.duration;
final curve = theme.sheetStyle.overlay.animation.curve;
```

### Typedef Compatibility

```dart
// bottom_sheet_style.dart
@Deprecated('Use SheetStyle instead. Will be removed in v2.0.0')
typedef BottomSheetStyle = SheetStyle;

// side_sheet_style.dart
@Deprecated('Use SheetStyle instead. Will be removed in v2.0.0')
typedef SideSheetStyle = SheetStyle;
```
